<scce-svg-container scce-viewbox="layout" ng-if="layout">
    <svg>

        <g class="axis x-axis" ng-attr-transform="translate(0,{{layout.innerHeight}})">
            <g class="ticks">
                <g class="tick" ng-repeat="x in scales.x.ticks(10)" ng-attr-transform="translate({{scales.x(x)}})">
                    <line ng-attr-y1="-{{layout.innerHeight}}" y2="5" />
                    <text dy="7">{{x}}</text>
                </g>
                <line class="tick miner-tick" ng-repeat="x in scales.x.ticks(50)" ng-attr-transform="translate({{scales.x(x)}})" ng-attr-y1="-{{layout.innerHeight}}" />
            </g>
            <line x1="-5" ng-attr-x2="{{layout.innerWidth}}" />
            <text class="label" ng-attr-transform="translate({{layout.innerWidth/2}},25)">
                {{legend.x.label}}
            </text>
        </g>

        <g class="data">
            <g class="chart-row" ng-class="{'failing': options.isFailing(row)}" ng-repeat="row in series track by row.id" ng-attr-transform="translate(0,{{scales.y(row.id) + scales.y.rangeBand()/2}})">
                <text class="data-label" x="-7">{{options.getLabel(row)}}</text>
                <rect y="-3" height="6" ng-attr-width="{{scales.x(options.getValue(row))}}" />
                <line class="average" ng-if="options.hasRef(row)" ng-attr-transform="translate({{scales.x(options.getRef(row).value)}},0)" y1='-5' y2='5' />
                <text class="data-value" dx="5" ng-attr-x="{{scales.x(options.getValue(row))}}">
                    <tspan>{{options.getValue(row)}}</tspan>
                    <tspan>{{options.getUnit(row)}}</tspan>
                </text>
            </g>
        </g>

        <g class="axis y-axis">
            <line ng-attr-y2="{{layout.innerHeight}}" />
            <g class="ticks">
                <line class="tick" ng-repeat="y in scales.y.range()" ng-attr-transform="translate(0,{{y}})" x1="-5" ng-attr-x2="{{layout.innerWidth}}" />
            </g>
        </g>

    </svg>
</scce-svg-container>
